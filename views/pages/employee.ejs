<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Employee</title>

    <!-- Custom styles for this template -->
    <link href="/css/simple-sidebar.css" rel="stylesheet">
   <link href="/css/style.css" rel="stylesheet">
   <link rel="stylesheet" href="/css/responsive.css">
   <link href="/fontawesome/css/all.css" rel="stylesheet">

</head>

<body class="sfmono">

    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/admin">
                <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fas fa-helicopter"></i>
                </div>
                <div class="sidebar-brand-text">Classsic Model<sup>Shop</sup></div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="/admin">
                    <i class="fas fa-fw fa-home "></i>
                    <span>Home</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                Product
            </div>

            <!-- Nav Item - Pages Collapse Menu -->
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                    aria-expanded="true" aria-controls="collapseTwo">
                    <i class="fas fa-fw fa-shopping-cart"></i>
                    <span>Ordering</span>
                </a>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Custom Ordering:</h6>
                        <a class="collapse-item" href="/admin/instock">In stock</a>
                        <a class="collapse-item" href="/admin/preorder">Pre-order</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/admin/status">
                    <i class="fas fa-fw fa-receipt"></i>
                    <span>Order Status</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/admin/discount">
                    <i class="fas fa-fw fa-tag"></i>
                    <span>Discount</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/admin/preordermanage">
                    <i class="fas fa-fw fa-calendar-alt"></i>
                    <span>Pre-order management</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                Customer
            </div>
            <!-- Nav Item - Charts -->
            <li class="nav-item">
                <a class="nav-link" href="/admin/customer">
                    <i class="fas fa-fw fa-user"></i>
                    <span>Customers management</span></a>
            </li>
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                Employee
            </div>
            <!-- Nav Item - Tables -->
            <li class="nav-item">
                <a class="nav-link" href="/admin/employee">
                    <i class="fas fa-fw fa-id-card"></i>
                    <span>Employees management</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider d-none d-md-block">

            <!-- Sidebar Toggler (Sidebar) -->

        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

                    <!-- Sidebar Toggle (Topbar) -->
                    <button id="sidebarToggleTop" class="btn btn-link rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Topbar Search -->
                    <form
                        class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
                        <div class="input-group">
                            <input type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
                                aria-label="Search" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button">
                                    <i class="fas fa-search fa-sm"></i>
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav ml-auto">

                        <!-- Nav Item - Search Dropdown (Visible Only XS) -->
                        <li class="nav-item dropdown no-arrow d-sm-none">
                            <a class="nav-link dropdown-toggle" href="#" id="searchDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-search fa-fw"></i>
                            </a>
                            <!-- Dropdown - Messages -->
                            <div class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in"
                                aria-labelledby="searchDropdown">
                                <form class="form-inline mr-auto w-100 navbar-search">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-light border-0 small"
                                            placeholder="Search for..." aria-label="Search"
                                            aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button">
                                                <i class="fas fa-search fa-sm"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </li>
                        <div class="topbar-divider d-none d-sm-block"></div>

                        <!-- Nav Item - User Information -->
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small">Welcome back </span>
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small" id="empName"></span>
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small" id="empRole"></span>
                                <img class="img-profile rounded-circle" src="/img/pm.jpg">
                            </a>
                            <!-- Dropdown - User Information -->
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Profile
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Settings
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Activity Log
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="/logout">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Logout
                                </a>
                            </div>
                        </li>

                    </ul>

                </nav>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">Employee management</h1>
                    </div>

                    <table class="table">
                        <thead class="thead-light collapse" id="thead">
                            <tr>
                                <th>Employeenumber</th>
                                <th>FirstName</th>
                                <th>LastName</th>
                                <th>officeCode</th>
                                <th>jobTitle</th>
                                <th>Manage</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="employeeData" class="collapse"></tbody>
                    </table>
                    <div id="count">

                    </div>
                    
                </div>
            </div>

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Department of Computer Engineering, Chiang Mai University</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>

    <div id="quickview-wrapper">
        <!-- Modal -->
        <div class="modal fade" id="productModal" tabindex="-1" role="dialog">
           <div class="modal-dialog modal__container" role="document">
              <div class="modal-content">
                 <div class="modal-header modal__header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                          aria-hidden="true">&times;</span></button>
                 </div>
                 <div class="modal-body">
                    <div class="modal-product">
                       <!-- Start product images -->
                       <div class="product-images">
                          <div class="main-image images">
                             <img alt="big images" src="/img/test10.jpg"
                                style="max-width: 100%; transition: all 0.3s ease-out 0s;margin-bottom: 0;">
                          </div>
                       </div>
                       <!-- end product images -->
                       <div class="product-info">
                          <h1 class="sfmono">productName</h1>
                          <div class="price-box-3">
                             <div class="s-price-box">
                                <span class="new-price">$99.99</span>
                                <span class="old-price">$11.11</span>
                             </div>
                          </div>
                          <div class="quick-desc">
                             Description
                             Lorem ipsum, dolor sit amet consectetur adipisicing elit. Saepe dignissimos atque ducimus
                             magni ratione quas esse voluptatibus reprehenderit veniam corporis maiores natus officiis
                             pariatur alias doloribus porro, voluptates distinctio autem.
                          </div>
                          <div class="product-detail">
                             <h2>productCode</h2>&nbsp; <h3>S99_9999</h3>
                          </div>
                          <div class="product-detail">
                             <h2>productScale</h2>&nbsp; <h3>1:9999999</h3>
                          </div>
                          <div class="product-detail">
                             <h2>Vendor</h2>&nbsp; <h3>Mr.Parinya Seetawan</h3>
                          </div>
                          <div class="product-detail">
                             <h2>Quantity</h2>&nbsp; <h3>9999</h3>
                          </div>
                          <div class="social-sharing">
                             <div class="widget widget_socialsharing_widget">
                                <h3 class="widget-title-modal sfmono">Share this product</h3>
                                <ul class="social-icons">
                                   <li><a target="_blank" title="facebook" href="#" class="social-icon"><i
                                            class="fab fa-facebook-f"></i></a>
                                   </li>
                                   <li><a target="_blank" title="twitter" href="#" class="social-icon"><i
                                            class="fab fa-twitter"></i></a></li>
                                   <li><a target="_blank" title="pinterest" href="#" class="social-icon"><i
                                            class="fab fa-pinterest-p"></i></a>
                                   </li>
                                   <li><a target="_blank" title="tumblr" href="#" class="social-icon"><i
                                            class="fab fa-tumblr"></i></a></li>
                                   <li><a target="_blank" title="instagram" href="#" class="social-icon"><i
                                            class="fab fa-instagram"></i></i></a></li>
                                </ul>
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
              </div>
           </div>
        </div>
     </div>
    
    <!-- Bootstrap core JavaScript -->
    <script src="/jquery/jquery.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/fontawesome/js/all.js"></script>
    <script src="/js/navbar.js"></script>

    <!-- Menu Toggle Script -->
    <script>
        $("#menu-toggle").click(function (e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $.ajax({
                url: '/admin/fetchDetails',
                type: 'GET',
                dataType: 'json',
                success: (data) => {
                    name = data[0].firstName + " " + data[0].lastName
                    role = data[0].jobTitle
                    $('#empName').html(name)
                    $('#empRole').html(role)
                }

            })
        })
    </script>

    <script type="text/javascript">
        $(document).ready(function(){
             $.ajax({
                url : '/admin/employee/fetchEmployeeData',
                type : 'GET',
                dataType : 'json',
                success : (data) => {
                    var append = ''
                    let count = 0
                    $.each(data, function(index,each){ 
                        append += '<tr>'
                        append += '<td>' + each.employeeNumber + '</td>'
                        append += '<td>' + each.firstName + '</td>'
                        append += '<td>' + each.lastName + '</td>'
                        append += '<td>' + each.officeCode + '</td>'
                        append += '<td>' + each.jobTitle + '</td>'
                        append += '<td>' 
                        append += '<form action = "#" ">'
                        append += '<button type="submit" class="btn btn-primary quick-view modal-view detail-link" data-toggle="modal" data-target="#productModal" id="edit" name="emp" value="'+each.employeeNumber+'"> Edit </button>'
                        append += '</form>'
                        append += '</td>'
                        append += '</tr>'
                        count ++
                       
                    })
                    // 
                    if(count < 1)  {
                        $('#count').append('<p class="btn btn-danger">Found : 0 </p>')
                    }else{
                        $('#employeeData').append(append)
                        $('#thead').show('fade')
                        $('#employeeData').show('fade')
                        $('#count').append('<p class="btn btn-success">Found :'+ count + '</p>') 
                    }     
                    

                }
            })
        })
    </script>
    <script>
        $(document).ready(function(){
           
        })
    </script>

</body>

</html>